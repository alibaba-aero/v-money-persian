"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defaults={prefix:"",suffix:"",thousands:",",decimal:".",precision:2},persianToEnglishMapper={"۱":1,"۲":2,"۳":3,"۴":4,"۵":5,"۶":6,"۷":7,"۸":8,"۹":9,"۰":0};function mapChars(e,t){return e.split("").map(function(e){return t[e]||e}).join("")}function persianToEnglish(e){return mapChars(e,persianToEnglishMapper)}function format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaults,n=(e="number"==typeof e?e.toFixed(fixed(t.precision)):persianToEnglish(e)).indexOf("-")>=0?"-":"",i=toStr(numbersToCurrency(onlyNumbers(e),t.precision)).split("."),r=i[0],a=i[1];return r=addThousandSeparator(r,t.thousands),t.prefix+n+joinIntegerAndDecimal(r,a,t.decimal)+t.suffix}function unformat(e,t){var n=(e=persianToEnglish(e)).indexOf("-")>=0?-1:1,i=numbersToCurrency(onlyNumbers(e),t);return parseFloat(i)*n}function onlyNumbers(e){return toStr(e=persianToEnglish(e)).replace(/\D+/g,"")||"0"}function fixed(e){return between(0,e,20)}function between(e,t,n){return Math.max(e,Math.min(t,n))}function numbersToCurrency(e,t){var n=Math.pow(10,t);return(parseFloat(e)/n).toFixed(fixed(t))}function addThousandSeparator(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1".concat(t))}function joinIntegerAndDecimal(e,t,n){return t?e+n+t:e}function toStr(e){return e?e.toString():""}function setCursor(e,t){var n=function(){e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function event(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function assign(e,t){return e=e||{},t=t||{},Object.keys(e).concat(Object.keys(t)).reduce(function(n,i){return n[i]=void 0===t[i]?e[i]:t[i],n},{})}function money(e,t){if(t.value){var n=assign(defaults,t.value);if("INPUT"!==e.tagName.toLocaleUpperCase()){var i=e.getElementsByTagName("input");1!==i.length||(e=i[0])}e.oninput=function(){var t=e.value.length-e.selectionEnd;e.value=format(e.value,n),t=Math.max(t,n.suffix.length),t=e.value.length-t,t=Math.max(t,n.prefix.length+1),setCursor(e,t),e.dispatchEvent(event("change"))},e.onfocus=function(){setCursor(e,e.value.length-n.suffix.length)},e.oninput(),e.dispatchEvent(event("input"))}}var Money={render:function(){var e=this.$createElement;return(this._self._c||e)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:this.precision,decimal:this.decimal,thousands:this.thousands,prefix:this.prefix,suffix:this.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:this.formattedValue},on:{change:this.change}})},staticRenderFns:[],name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return defaults.precision}},decimal:{type:String,default:function(){return defaults.decimal}},thousands:{type:String,default:function(){return defaults.thousands}},prefix:{type:String,default:function(){return defaults.prefix}},suffix:{type:String,default:function(){return defaults.suffix}}},directives:{money:money},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(e,t){var n=format(e,this.$props);n!==this.formattedValue&&(this.formattedValue=n)}}},methods:{change:function(e){this.$emit("input",this.masked?e.target.value:unformat(e.target.value,this.precision))}}};function install(e,t){t&&Object.keys(t).map(function(e){defaults[e]=t[e]}),e.directive("money",money),e.component("money",Money)}"undefined"!=typeof window&&window.Vue&&window.Vue.use(install),exports.Money=Money,exports.VMoney=money,exports.options=defaults,exports.default=install;
//# sourceMappingURL=v-money-persian.cjs.min.js.map
